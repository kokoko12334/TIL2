import sys

input = sys.stdin.readline
n, m = [int(i) for i in input().split()]
arr = []
for _ in range(n):
    arr.append([int(i) for i in input().split()])

case = [
    [(0,1), (1,1), (2,0), (2,1)],
    [(0,0), (0,1), (0,2), (1,2)],
    [(0,0), (0,1), (1,0), (2,0)],
    [(0,0), (1,0), (1,1), (1,2)],
    [(0,0), (0,1), (0,2), (0,3)],
    [(0,0), (1,0), (2,0), (3,0)],
    [(0,0), (0,1), (1,0), (1,1)],
    [(0,0), (1,0), (2,0), (2,1)],
    [(0,0), (0,1), (0,2), (1,0)],
    [(0,0), (0,1), (1,1), (2,1)],
    [(0,2), (1,0), (1,1), (1,2)],
    [(0,0), (1,0), (1,1), (2,1)],
    [(0,1), (0,2), (1,0), (1,1)],
    [(0,0), (0,1), (0,2), (1,1)],
    [(0,1), (1,0), (1,1), (2,1)],
    [(0,1), (1,0), (1,1), (1,2)],
    [(0,0), (1,0), (1,1), (2,0)],
    [(0,1), (1,0), (1,1), (2,0)],
    [(0,0), (0,1), (1,1), (1,2)]
]
answer = 0
for now in case:
    for i in range(n):
        for j in range(m):
            result = 0
            skip = True
            for index in range(4):
                y = now[index][0]+i
                x = now[index][1]+j
                if x < 0 or x >= m or y < 0 or y >= n:
                    skip = False
                    break
                result += arr[y][x]
            if skip:
                answer = max(answer, result)
print(answer)


# 1111

# 1
# 1
# 1
# 1


# 11
# 11

# 1
# 1
# 11

# 111
# 1

# 11
#  1
#  1

#   1
# 111


#  1
#  1
# 11

# 111
#   1

# 11
# 1
# 1

# 1
# 111




# 1
# 11
#  1

#  11
# 11


#  1
# 11
# 1

# 11
#  11

# 111
#  1

#  1
# 11
#  1

#  1
# 111

# 1
# 11
# 1

